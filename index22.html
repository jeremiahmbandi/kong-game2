<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Kong (Treasure Hunt) Slot Machine</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Andada+Pro:ital,wght@0,400..840;1,400..840&family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Victor+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
      body {
          margin: 0;
          padding: 0;
          overflow: hidden;
          background: #2c2c2c;
          touch-action: manipulation;
      }
      @font-face {
          font-family: 'aldo';
          src: url('aldo_the_apache') format('truetype'); /* Adjust the path and format */
      }

      /* Language Selector Styles */
      .language-selector {
          position: absolute;
          top: 10px;
          left: 10px;
          z-index: 9999;
      }

      .language-dropdown {
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
          border: none;
          border-radius: 4px;
          padding: 8px 12px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 14px;
      }

      .language-dropdown:hover {
          background-color: rgba(0, 0, 0, 0.8);
      }

      .language-dropdown-content {
          display: none;
          position: absolute;
          background-color: rgba(0, 0, 0, 0.9);
          min-width: 160px;
          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
          z-index: 1;
          border-radius: 4px;
          max-height: 300px;
          overflow-y: auto;
      }

      .language-dropdown-content.show {
          display: block;
      }

      .language-option {
          color: white;
          padding: 12px 16px;
          text-decoration: none;
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
      }

      .language-option:hover {
          background-color: rgba(50, 50, 50, 0.8);
      }

      .language-option.selected {
          background-color: rgba(50, 50, 50, 0.8);
      }

      .language-flag {
          font-size: 18px;
      }

      .language-name {
          font-size: 14px;
      }

      @media (max-width: 576px) {
          .language-name-full {
              display: none;
          }
      }

      /* Original Game Styles */
      #game-container {
          width: 100%;
          height: 100vh;
          max-height: 100vh;
          display: flex;
          flex-direction: column;
          font-family: 'aldo', sans-serif;
      }
      .game-canvas-container {
          flex: 1;
          position: relative;
          height: 100%;
          width: 96%;
          margin: auto;
          overflow: hidden;
          z-index: 888;
      }
      .game-controls {
          margin: 0px !important;
          padding: 0px !important;
          width: 100%;
          background-image: url('wood.jpg');
          border-radius: 12px 12px 0 0;
          z-index: 1000;
          bottom: 0 !important;
      }
      .control-group {
          display: flex;
          flex-direction: column;
          gap: 10px;
      }
      .spin-button, .autoplay-button {
          cursor: pointer;
          width: 100%;
          text-align: center;
          padding: 12px;
      }
      /* Responsive adjustments */
      @media (max-height: 600px) {
          .game-controls {
              padding: 5px;
          }
          .control-group {
              gap: 5px;
          }
          .input-group {
              margin-bottom: 5px;
          }
      }
      /* Prevent text selection */
      * {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
      }
      /* Allow input in number fields */
      input[type="number"] {
          -webkit-user-select: auto;
          -moz-user-select: auto;
          -ms-user-select: auto;
          user-select: auto;
      }
      /* #gameinfo_overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100vh;
          background-color: black;
          z-index: 2002;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          overflow: auto;
          display: none;
      } */
      #jdb_overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: black;
          z-index: 2002;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }
      #kong_overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: url('kong_bcg4.png');
          background-size:cover;
          background-repeat: repeat;
          background-color: black;
          z-index: 2001;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }
      /* Stake button and overlay styles */
      .overlay {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 1);
          z-index: 2000;
          display: none;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }
      .overlay-content {
          border-radius: 12px;
          width: 90%;
          max-width: 400px;
          padding: 20px;
          margin-top: 100px;
      }
      .overlay-content-stake {
          border-radius: 12px;
          width: 100%;
          max-width: 400px;
          padding: 20px;
          margin-top: 100px;
      }
      .overlay-header {
          color: #e4d594;
          text-align: center;
          margin-bottom: 20px;
          font-size: 1.5rem;
          font-weight: bold;
      }
      .options-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 10px;
      }
      .option-button {
          background: linear-gradient(to bottom, #353333, #272525);
          color: white;
          border: none;
          border-radius: 8px;
          padding: 15px 0;
          font-size: 1.2rem;
          cursor: pointer;
          transition: all 0.2s;
      }
      .option-button:hover, .option-button.selected {
          background-color: #25282b;
          box-shadow: 
              inset 0 0 0 2px rgba(0, 0, 0, 0.15),
              0 0 0 2px rgba(0, 0, 0, 0.15),
              inset 0 0 0.875rem #FCEAAC,
              0 0 0.875rem #FCEAAC;
      }
      .overlay-footer {
          width: inherit;
          display: flex;
          justify-content: space-around;
          margin-top: 20px;
          padding-bottom: 50px;
          bottom: 0;
          position:absolute;
      }
      .overlay-footer-stake {
          margin-top: 20px;
          padding-bottom: 50px;
          bottom: 0;
          position:absolute;
      }
      .overlay-footer button {
          padding: 8px 16px;
          border-radius: 4px;
          border: none;
          cursor: pointer;
      }
      .cancel-button {
          background-color: #333;
          color: white;
      }
      .confirm-button {
          background-color: #333;
          box-shadow: 0 0 4px #e4d594;
          color: white;
      }
      .divider-container {
          color: #e4d594;
      }
      .divider {
          height: 2px;
          background-color: #e4d594;
          width: 30vw;
      }
      .divider-text {
          margin: 0 10px;
      }
      .divider-wrapper {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 100%;
          margin: 16px 0;
      }
      .check-icon {
          display: inline-block;
          width: 16px;
          height: 16px;
          margin-left: 4px;
          position: relative;
      }
      .check-icon:before {
          content: '';
          position: absolute;
          width: 8px;
          height: 12px;
          border-right: 2px solid white;
          border-bottom: 2px solid white;
          transform: rotate(45deg);
          top: 0;
          left: 4px;
      }
      
      .victor-mono {
          font-family: "Victor Mono", monospace;
          font-optical-sizing: auto;
          font-weight: normal;
          font-style: normal;
      }

      /* Settings overlay styles */
      .sound-option {
          color: white;
      }
      .icon-container {
          font-size: 1.5rem;
          display: inline-block;
          width: 30px;
          text-align: center;
      }
      .loader-container {
          height: 10px;
          background: rgba(0, 0, 0, 0.1);
          border-radius: 12px;
      }
      .loader-bar {
          height: 100%;
          width: 0;
          background: orange;
          transition: width 0.3s ease;
      }
      .glowing-button {
          position: absolute; /* Ensure ::after is positioned relative to this */
          bottom: 9%;
          padding: 6px 50px;
          font-size: 18px;
          font-weight: bold;
          color: white;
          cursor: pointer;
          border-radius: 12px;
          border-width: 5px;
          border-style: solid;
          border-color: #c09c0e;
          background-color: #fada60;
          font-weight: bold;
          text-shadow: 
              -1px -1px 0 orange,  
              1px -1px 0 orange,
              -1px  1px 0 orange,
              1px  1px 0 orange;
          overflow: hidden; /* Prevents the light effect from overflowing */
      }

      /* Light reflection effect */
      .glowing-button::after {
          content: "";
          position: absolute;
          top: 0;
          left: -100%;
          width: 200%; /* Reduce width to prevent excessive overflow */
          height: 100%;
          background: linear-gradient(
              100deg,
              rgba(255, 255, 255, 0) 40%,
              rgba(255, 255, 255, 0.4) 50%,
              rgba(255, 255, 255, 0) 60%
          );
          animation: light-sweep 2s infinite linear;
      }

      @keyframes light-sweep {
          0% {
              left: -100%;
          }
          100% {
              left: 100%;
          }
      }

      /* Free spins indicator */
      .free-spins-indicator {
          position: absolute;
          top: 10px;
          left: 50%;
          transform: translateX(-50%);
          background-color: rgba(192, 156, 14, 0.8);
          color: white;
          padding: 5px 15px;
          border-radius: 20px;
          font-size: 1.0rem;
          font-weight: bold;
          z-index: 100;
          display: none;
      }

      /* Win message */
      .win-message {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background-color: rgba(0, 0, 0, 0.7);
          color: #fada60;
          padding: 15px 30px;
          border-radius: 10px;
          text-align: center;
          font-size: 1.5rem;
          font-weight: bold;
          animation: bounce 1s infinite;
          z-index: 100;
          display: none;
      }
  </style>
  <style>
      .mobile-wrapper {
          max-width: 100vw;
          max-height: 100vh;
      }
      .autoplay-button, .stake-button{
          height: 80px;
          width: 80px;
      }
      .spin-img{
          height: 65px;
          width: 65px;
      }
      .spin-button{
          height: 100px;
          width: 100px;
      }
      .autospininner-img{
          height: 40px;
          width: 40px;
      }
      .autospininnerimgstop{
          height: 30px;
          width: 30px;
      }
      .totalbetinner-img{
          height: 25px;
      }
      .current-stake{
          font-size: 1.2rem;
          color: #f6d64e;
      }
      #playground{
          height: 35vh;
      }
      .fs-text-image{
          max-height: 25px;
      }
      #remaining_fs_holder, #total_fs_holder{
          color: #8cc904;
          font-size: 2.0rem;
          font-weight: bold;
      }

      @media screen and (min-width: 900px) {
          .sunburst-container {
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              width: 80vw;
              max-width: 600px;
              height: 80vw;
              max-height: 600px;
              z-index: 10; /* Higher than coins */
              display: flex;
              align-items: center;
              justify-content: center;
              overflow: visible;
              pointer-events: none;
          }
          /* #gameinfo_overlay {
              width: 100%;
              height: 100%;
              top: 0;
              left: 0;
              left: 50%;
              transform: translate(-50%, -0%);
              background-color: black;
              z-index: 2002;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              display: none;
              position: relative;
              overflow: auto;
          } */
          #jdb_overlay {
              max-width: 320px;
              max-height: 5100px;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              left: 50%;
              transform: translate(-50%, -0%);
              background-color: black;
              z-index: 2002;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          #kong_overlay {
              max-width: 320px;
              max-height: 5100px;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              left: 50%;
              transform: translate(-50%, -0%);
              background-image: url('kong_bcg5.png');
              background-size:contain;
              background-repeat: no-repeat;
              background-color: black;
              z-index: 2001;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          .overlay {
              position: absolute;
              max-width: 320px;
              max-height: 5100px;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              left: 50%;
              transform: translate(-50%, -0%);
              background-color: rgba(0, 0, 0, 1);
              z-index: 2000;
              display: none;
              flex-direction: column;
              align-items: center;
              justify-content: center;
          }
          #playground{
              max-height: 200px;
              width: 100%;
          }
          .mobile-wrapper {
              max-width: 320px;
              max-height: 490px;
          }
          .autoplay-button, .stake-button{
              height: 55px;
              width: 55px;
          }
          .spin-img{
              height: 45px;
              width: 45px;
          }
          .spin-button{
              height: 70px;
              width: 70px;
          }
          .autospininner-img{
              height: 30px;
              width: 30px;
          }
          .autospininnerimgstop{
              height: 25px;
              width: 25px;
          }
          .totalbetinner-img{
              height:21px
          }
          .current-stake{
              font-size: 1.0rem;
              color: #f6d64e;
          }
          .fs-text-image{
              max-height: 20px;
          }
          #remaining_fs_holder, #total_fs_holder{
              color: #8cc904;
              font-size: 1.5rem;
              font-weight: bold;
          }
      }
  </style>

<style>
  .btn-gold {
    background-color: #b8860b;
    color: white;
    border: none;
    font-weight: bold;
    transition: background-color 0.3s;
  }

  .btn-gold:hover {
    background-color: #a67c00;
    color: white;
  }

  #winOverlay{
      position: absolute;
      width: 100%;
      min-height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
  }


  #closeBtn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    padding: 8px;
    z-index: 20;
  }

  .win-content {
    position: relative;
    text-align: center;
    z-index: 15;
  }

  /* Rotating sunburst effect */
  .sunburst-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100vw;
    max-width: 600px;
    height: 80vw;
    max-height: 600px;
    z-index: 10; /* Higher than coins */
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: visible;
    pointer-events: none;
  }

  .sunburst {
    width: 100%;
    height: 100%;
    background-image: url('https://hebbkx1anhila5yf.public.blob.vercel-storage.com/BigWin_FX-pnFZvgsE0rjtfTiTODDEY1oM6AHQJ4.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    animation: rotate 10s linear infinite;
  }

  /* Colored overlays for different win levels */
  .big-win-color {
    filter: none;
  }

  .mega-win-color {
    filter: none; /* Original gold/yellow color */
  }

  .ultra-win-color {
    filter: none;
  }

  @keyframes rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .win-text {
    font-size: calc(2rem + 2vw);
    font-weight: bold;
    margin-bottom: 16px;
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
    animation: text-flicker 2s infinite;
    transition: color 0.5s, transform 0.5s;
    position: relative;
    z-index: 20;
  }

  .counter-text {
    font-size: calc(0.5rem + 2vw);
    font-weight: bold;
    color: #a67c00;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.7), 0 0 20px rgba(255, 215, 0, 0.5);
    animation: pulse 1.5s infinite;
    position: relative;
    z-index: 20;
  }

  #coinsContainer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    z-index: 5; /* Lower than sunburst */
  }

  .coin {
    position: absolute;
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.7));
    transition: transform 0.05s ease-out;
    z-index: 5; /* Lower than sunburst */
  }

  /* Win level styles */
  .big-win {
    color: #ffd700;
  }

  .mega-win {
    color: #ffd700;
  }

  .ultra-win {
    color: #ffd700;
  }

  @keyframes text-flicker {
    0%, 100% {
      opacity: 1;
      text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
    }
    50% {
      opacity: 0.9;
      text-shadow: 0 0 15px currentColor, 0 0 25px currentColor;
    }
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  @keyframes scale-in {
    0% {
      transform: scale(0.5);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .scale-in {
    animation: scale-in 0.5s forwards;
  }

  /* Responsive adjustments */
  @media (max-width: 576px) {
    .btn-group {
      flex-direction: column;
      width: 100%;
    }
    
    .btn-group .btn {
      margin-bottom: 0.5rem;
      width: 100%;
    }
    
    .win-text {
      font-size: calc(1.5rem + 2vw);
    }
    
    .counter-text {
      font-size: calc(1em + 2vw);
    }
  }
</style>

</head>
<body class="w-100">
<!-- Language Selector -->
<div class="language-selector">
  <button id="language-dropdown" class="language-dropdown">
      <span class="language-flag">ðŸ‡¬ðŸ‡§</span>
      <span class="language-name-full">English</span>
      <i class="fas fa-chevron-down"></i>
  </button>
  <div id="language-dropdown-content" class="language-dropdown-content">
      <!-- Language options will be added here by JavaScript -->
  </div>
</div>

<div style="background-image: url('page_bcg.png');background-size: cover;height: 100vh;padding: 0 !important;">
  <div style="z-index: 3;position: absolute;">
      <button id="featuresButton" class="btn btn-warning mt-5 mb-2 mx-3" data-translate="featureButton">
          Feature
      </button>
  </div>
  <div id="featuresOverlay" style="display: none;z-index: 9999;position: absolute;height: 100%;width: 100%;background-color: rgb(0,0,0,0.8);">
     <div style="height: 100%;width: 100%;font-weight: bold;" class="d-flex justify-content-center align-items-center">
          <div class="mx-auto">
              
              
              <div class="mx-auto">
                  <button onclick="setDemoFeature('big spin')" class="btn btn-warning btn-lg my-2 mb-2 mx-3" data-translate="feature1">
                      Feature 1
                  </button>
              </div>
              <div class="mx-auto">
                  <button onclick="setDemoFeature('big win')"  class="btn btn-warning btn-lg my-2 mx-3" data-translate="feature2">
                      Feature 2
                  </button>
              </div>
              <div class="mx-auto">
                  <button onclick="setDemoFeature('free spins')"  class="btn btn-warning btn-lg my-2 mb-2 mx-3" data-translate="feature3">
                      Feature 3
                  </button>
              </div>
          </div>
     </div>
  </div>
  <div class="mobile-wrapper mx-auto" >

      <div id="gameinfo_overlay" class="overlay" style="max-height: 100vh !important;overflow-y: scroll;overflow-x: hidden;">
          <div class="divider-container">
              <div class="divider-wrapper">
                  <div class="divider-text h3" data-translate="gameRule">GAME RULE</div>
              </div>
          </div>
          <div class="d-flex justify-content-center align-items-center">
              <div style="width: 90%;background-color: #e4d594;height: 5px;"></div>
          </div>
          <div class="" style="color: white;">
              <div style="border: 1px;border-color: #e4d594;font-size: 1.0rem;border-style: solid;" class="py-4 mx-3 d-flex justify-content-center align-items-around my-3">
                  <div class="px-2">
                      <span style="color: #e4d594;" data-translate="denomination"> Denomination:</span> 0.01
                  </div>
                  <div class="px-2">
                      <span style="color: #e4d594;" data-translate="betMultiplier">Bet Multiplier:</span> 1
                  </div>
              </div>
              <div class="row px-3">
                  <div class="col-lg-3 col-md-12 col-sm-12 text-center px-4" style="font-weight: bold;">
                      <img src="wild.png" style="max-width: 100px;" alt="">
                      <div class="h3" data-translate="wild">WILD</div>
                  </div>
                  <div class="col-lg-9 col-md-12 col-lg-12" style="font-weight: bold;">
                      ONLY APPEARS ON REELS 2,3,4 AND 5.
                      <br>
                      <br>
                      <div class="d-flex justify-content-start align-items-center">
                          SUBSTITUTES FOR ALL SYMBOLS EXCEPT <img style="width: 40px;height: auto;" src="scatter.png" alt="">
                      </div>
                  </div>
              </div>
  
  
              <div class="row px-3 my-3">
                  <div class="col-lg-3 col-md-12 col-sm-12 text-center px-4 mb-3">
                      <img src="scatter.png" style="max-width: 100px;" alt="">
                      <div class="h3" data-translate="freeSpinBonus">FREE SPIN BONUS</div>
                  </div>
                  <div class="col-lg-9 col-md-12 col-lg-12" style="font-weight: bold;">
                      APPEARS ON ALL REELS
                style="font-weight: bold;">
                      APPEARS ON ALL REELS
                      <br>
                      <div class="">
                          IF ATLEAST ONE <img style="width: 40px;height: auto;" src="scatter.png" alt=""> APPEARS ON ALL REELS FREE SPIN BONUS WITH 13 FREE SPINS AND A BONUS MULTIPLIER WILL BE TRIGGERED 
                      </div>
  
                      <div class="mt-4">
                          <div class="my-1">
                              5 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 3X BONUS MULTIPLIER
                          </div>
                          <div class="my-1">
                              6 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 6X BONUS MULTIPLIER
                          </div>
                          <div class="my-1">
                              7 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 12X BONUS MULTIPLIER
                          </div>
                          <div class="my-1">
                              8 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 24X BONUS MULTIPLIER
                          </div>
                          <div class="my-1">
                              9 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 36X BONUS MULTIPLIER
                          </div>
                          <div class="my-1">
                              10 <img style="width: 40px;height: auto;" class="px-1" src="scatter.png" alt=""> AWARD 72X BONUS MULTIPLIER
                          </div>
                      </div>
                  </div>
              </div>
  
              <div class="divider-container">
                  <div class="divider-wrapper">
                      <div class="divider-text h2" style="font-weight: bold;" data-translate="paytable">PAYTABLE</div>
                  </div>
              </div>
  
              <div class="d-flex justify-content-center align-items-center">
                  <div style="width: 90%;background-color: white;height: 2px;"></div>
              </div>
  
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="treasurechest.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 250
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 100
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 40
                          </div>
                      </div>
                  </div>
                  <div class="col-12 my-3 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="explorer.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 200
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 80
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 30
                          </div>
                      </div>
                  </div>
                  <div class="col-12 my-3 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="compass.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 175
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 60
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 25
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="binoculars.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 150
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 50
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 20
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="a.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 100
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 20
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 10
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="k.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 90
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 15
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 8
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="q.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 80
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 12
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 6
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="j.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 70
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 10
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 5
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2" style="visibility: hidden;">
                      
                  </div>
              </div>
  
              <div style="font-size: 1.0rem;" class="text-center">
                  <div class="my-1">
                      ALL WINS PAY LEFTMOST TO RIGHT, EXCEPT <img src="scatter.png" style="max-width: 40px;" alt="">
                  </div>
                  <div class="my-1">
                      PAYTABLE WINS ARE SHOWN FOR BET MULTIPLIER X1.
                  </div>
                  <div class="my-1">
                      PAYTABLE WINS ARE SHOWN IN CREDITS
                  </div>
              </div>
  
              <div class="divider-container mt-5">
                  <div class="divider-wrapper">
                      <div class="divider-text h2" style="font-weight: bold;" data-translate="freeSpinBonus">FREE SPIN BONUS</div>
                  </div>
              </div>
  
              <div class="d-flex justify-content-center align-items-center">
                  <div style="width: 90%;background-color: white;height: 2px;"></div>
              </div>
              
  
              <div style="font-size: 1.0rem;border: 1px;border-style: solid;border-color: white;" class="px-4 my-3 mx-3 py-2">
                  IF AT LEAST ONE <img style="max-width: 40px;" src="scatter.png" alt=""> APPEARS ON EACH REEL, ADDITIONAL 13 FREE SPINS ARE AWARDED, TO A MAXIMUM OF 100 FREE SPINS IN A SINGLE BOUGHT GAME. RETRIGGER OF FREE SPIN BONUS WILL NOT CHANGE THE BONUS MULTIPLIER OF THE FREE SPIN BONUS. 
                  <br>
                  DURING FREE SPIN BONUS, THE WINS ARE MULTIPLIED BY THE BONUS MULTIPLIER AND ADDED TO THE WIN METER
              </div>
  
              <div style="border: 1px;border-color: #e4d594;font-size: 1.0rem;border-style: solid;" class="py-4 mx-3 d-flex justify-content-center align-items-around my-3">
                  <div class="px-2">
                      <span style="color: #e4d594;" data-translate="denomination"> Denomination:</span> 0.01
                  </div>
                  <div class="px-2">
                      <span style="color: #e4d594;" data-translate="betMultiplier">Bet Multiplier:</span> 1
                  </div>
              </div>

              <div class="row px-3">
                  <div class="col-lg-3 col-md-12 col-sm-12 text-center px-4" style="font-weight: bold;">
                      <img src="wild.png" style="max-width: 100px;" alt="">
                      <div class="h3" data-translate="wild">WILD</div>
                  </div>
                  <div class="col-lg-9 col-md-12 col-lg-12" style="font-weight: bold;">
                      ONLY APPEARS ON REELS 2,3,4 AND 5.
                      <br>
                      <br>
                      <div class="d-flex justify-content-start align-items-center">
                          SUBSTITUTES FOR ALL SYMBOLS EXCEPT <img style="width: 40px;height: auto;" src="scatter.png" alt="">
                      </div>
                  </div>
              </div>

              <div class="row px-3 my-3">
                  <div class="col-lg-3 col-md-12 col-sm-12 text-center px-4 mb-3">
                      <img src="scatter.png" style="max-width: 100px;" alt="">
                      <div class="h3" data-translate="freeSpinBonus">FREE SPIN BONUS</div>
                  </div>
                  <div class="col-lg-9 col-md-12 col-lg-12" style="font-weight: bold;">
                      APPEARS ON ALL REELS
                  </div>
              </div>
  
  
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="treasurechest.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 250
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 100
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 40
                          </div>
                      </div>
                  </div>
                  <div class="col-12 my-3 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="explorer.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 200
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 80
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 30
                          </div>
                      </div>
                  </div>
                  <div class="col-12 my-3 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="compass.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 175
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 60
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 25
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="binoculars.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 150
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 50
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 20
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="a.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 100
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 20
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 10
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="k.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 90
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 15
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 8
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row my-4" style="font-size: 1.1rem;font-weight: bold;">
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="q.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 80
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 12
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 6
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2">
                      <img src="j.png" style="max-width: 100px;" alt="">
                      <div class="px-4">
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">5 - </span> 70
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">4 - </span> 10
                          </div>
                          <div class="my-1">
                              <span style="color: #e4d594;font-weight: bold;">3 - </span> 5
                          </div>
                      </div>
                  </div>
                  <div class="my-3 col-12 col-lg-4 col-dm-4 col-sm-12 d-flex justify-content-center align-items-center align-items-center mx-2" style="visibility: hidden;">
                      
                  </div>
              </div>
  
              <div style="font-size: 1.0rem;" class="text-center">
                  <div class="my-1">
                      ALL WINS PAY LEFTMOST TO RIGHT, EXCEPT <img src="scatter.png" style="max-width: 40px;" alt="">
                  </div>
                  <div class="my-1">
                      PAYTABLE WINS ARE SHOWN FOR BET MULTIPLIER X1.
                  </div>
                  <div class="my-1">
                      PAYTABLE WINS ARE SHOWN IN CREDITS
                  </div>
              </div>
  
              <div class="divider-container mt-5">
                  <div class="divider-wrapper">
                      <div class="divider-text" style="font-weight: bold;">243 WAYS</div>
                  </div>
              </div>
  
              <div class="d-flex justify-content-center align-items-center">
                  <div style="width: 90%;background-color: white;height: 2px;"></div>
              </div>
  
              <div class="row px-3 my-3">
                  <div class="col-lg-3 col-md-12 col-sm-12 text-center px-4">
                      <img src="tick.png" class="mx-4" style="max-width: 80%;" alt="">
                  </div>
                  <div class="col-lg-9 col-md-12 col-lg-12">
                      REELS = 5
                      <div class="d-flex justify-content-start align-items-center">
                          PLAY 5 REELS WITH MINIMUM BET 30 MULTIPLIED BY DENOMINATION.
                      </div>
                  </div>
              </div>
              <div>
                  <div style="width: 90%;margin-bottom: 140px;" class="mx-auto mt-3 pb-3">
                      <div>
                          ALL WINNING COMBINATIONS PAY FROM LEFT TO RIGHT ON ADJACENT REELS BEGINNING FROM LEFTMOST EXCEPT <img src="scatter.png" style="width: 40px;" alt="">
                      </div>
                      <div>
                          ALL WINS ARE MULTIPLIED BY THE BET MULTIPLIER. ONLY THE HIGHEST WINNING COMBINATION IS PAID ON EACH PAY WAY.
                      </div>
                  </div>
              </div>
          </div>
  
          <div class="text-center py-3 w-100" style="position: fixed;bottom: 0;background-color: #191818;color: white;font-size: 1.0rem;z-index: 9999;margin: 0 !important;">
              <div>
                  MALFUNCTION VOIDS ALL PLAYS AND PAYS.
              </div>
              <div class="my-2 d-flex justify-content-center align-items-center">
                  <div class="d-flex justify-content-center align-items-center" style="height: 45px;width: 45px;border-radius: 50%;border-color: white;border-style: solid;">
                      <i id="close_info_button" class="fa fa-arrow-left fa-2x py-2 px-2"></i>
                  </div>
              </div>
          </div>
      </div>
      
      <div id="device_overlay" style="display: none;">
          <div class="d-flex flex-column justify-content-center align-items-center text-center p-4" 
              style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.99); color: white; font-size: 1.5rem; text-align: center; z-index: 9999; display: flex;"
              >
              <div class="container">
                  <h2 class="fw-bold">FOR AN OPTIMAL GAMING EXPERIENCE</h2>
                  <p class="lead">USE A MOBILE DEVICE</p>
                  <div class="my-3 text-center my-3">
                      <i class="fa fa-mobile-alt fa-3x"></i>
                  </div>
              </div>
          </div>
      </div>


      


      <div id="winOverlay" class="mobile-wrapper" >
          <button id="closeBtn" class="btn-close btn-close-white" aria-label="Close" data-translate="cancel"></button>
          <div id="coinsContainer"></div>
          <div class="sunburst-container">
              <div id="sunburst"  class="sunburst mega-win-color"></div>
          </div>
          <div class="win-content">
              <h2 id="winText" class="win-text big-win">
              <img id="winImg" style="max-width: 200px;" src="winlevels/bigwin.png" alt="">
              </h2>
              <div class="counter-text" id="winAmount">$0</div>
          </div>
      </div>
      
      <div id="jdb_overlay" >
          <div style="height: 100%;width: 100%;" class="d-flex justify-content-center align-items-center">
              <div class="row">
                  <div class="d-flex justify-content-center align-items-center mx-auto">
                      <div>
                          <img src="jdb_logo.png" style="max-width: 100%;" alt="mx-auto">
                          <div class="d-flex justify-content-center mx-auto">
                              <div class="loader-container" style="width: 50%;border-style: solid;border-width: 1px;">
                                  <div class="loader-bar" id="loader-bar"></div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  
      <div id="kong_overlay">
          <div class="d-flex justify-content-center">
              <button class="glowing-button text-white" onclick="hideKongOverlay()" data-translate="startButton">START</button>
          </div>
      </div>
  
      <div id="game-container" class="victor-mono">
          <div>
              <img id="img_top" src="bg-top6.gif" style="width: 100%;height: auto;" alt="">
              <img id="img_top_volcano_part_1" src="volcano.gif" style="width: 100%;height: auto;display: none;" alt="">
              <img id="img_top_volcano_part_2" src="volcano-part-2-complete.gif" style="width: 100%;height: auto;display: none;" alt="">
          </div>
          <div id="playground" style="background: url('nbcg1.png');min-height: 35vh;width: 100%;background-size: cover;">
              <div id="startfreespinsoverlay" style="display: none;position: absolute;height: inherit;width: inherit;z-index: 999999;">
                  <div class="d-flex justify-content-center align-items-center" style="height: 100%;width: 100%;">
                      <div id="startfreespinsbutton" class="py-1 px-3 text-white" style="border-radius: 6px;border: 2px white solid;font-size: 0.75rem;background-color: rgba(0, 0, 0, 0.8);">
                          PRESS REEL TO START THE BONUS
                      </div>
                  </div>
              </div>
              <div id="freespinsoverlay" style="display: none;position: absolute;background-color: rgba(0, 0, 0, 0.8);height: inherit;width: inherit;z-index: 999999;">
                  
                  <div class="mx-3 my-3">
                      <img  id="freespinsoverlayimg" class="" src="freespinsoverlay.png" style="width: 100%;height: auto;" alt="">
                      <img  id="freespinsoverlayimg2" class="" src="additionalfreespins.png" style="display: none;width: 100%;height: auto;" alt="">
                  </div>
              </div>
              <div class="game-canvas-container">
                  <!-- Free Spins Indicator -->
                  <div id="free-spins-indicator" class="free-spins-indicator">
                      FREE SPINS: <span id="free-spins-count">0</span> | MULTIPLIER: <span id="bonus-multiplier">0</span>x
                  </div>
                  
                  <!-- Win Message -->
                  <div id="win-message" class="win-message">
                      <div>BIG WIN!</div>
                      <div id="win-amount">0.00</div>
                  </div>
              </div>
          </div>
  
          <!-- Controls -->
          <div class="game-controls p-2">
              <div id="results_holder" class="w-100 text-center text-white d-flex justify-content-center align-items-center" style="background-image: url('resultsbcg3.png');background-size: cover;height: 30px;font-size: 1.3rem;">
                  <div style="margin: 5px 0px;">
                      <span data-translate="win">WIN</span> <span class="px-1" id="update_winnings">0.00</span>
                  </div>
              </div>
              <div id="freespins_display" style="display: none; justify-content: center; align-items: center; padding-top: 2px;max-width: 100%;height: 100px;">
                  <img class="fs-text-image"  src="freespin_part_a.png" alt="">
                  <span class="px-3" id="remaining_fs_holder" >0</span>
                  <img class="fs-text-image" src="freespin_part_b.png"  alt="">
                  <span class="px-3" id="total_fs_holder">0</span>
              </div>
              <div id="normalspins_display" style="display: flex; justify-content: center; align-items: center; padding-top: 2px">
                  <div id="autoPlayButton" class="rounded-circle d-flex justify-content-center align-items-center autoplay-button" style="background-image: url('autospinbcg.png');background-size: cover;">
                      <img src="autospininnerimg.png" class="autospininner-img"  alt="">
                  </div>
                  <div id="spinButton" class="mx-4 d-flex justify-content-center align-items-center spin-button" style="border-radius: 50%;background-image: url('spinbcg.png');background-size: cover;">
                      <div id="remainingAutoSpins" style="z-index: 2;position: absolute;color: darkorange;font-weight:bolder;font-size: 1.5rem;">
                      </div>
                      <div class="d-flex justify-content-center align-items-center spin-img" id="spin_img" style="background: url('spininnerimg.png');background-size: cover;">
                          
                      </div>
                  </div>
                  
                  <!-- Stake button that opens the overlay -->
                  <div id="stakeButton" class="text-center d-flex justify-content-center align-items-center stake-button" style="background-image: url('totalbetbcg.png');background-size: cover;color: orange;font-size: 0.85rem;line-height: 1;font-weight: 900;border-radius: 50%;">
                      <div>
                          <div class="d-flex justify-content-center">
                              <img src="totalbetinnerimg.png" class="totalbetinner-img"  alt="">
                          </div>
                          <div class="text-center">
                              <span id="currentStake" class="current-stake">0.3</span>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="container mb-2">
                  <div style="display: flex; width: 100%; position: relative; align-items: center;">
                      <div onclick="displaySettingsOverlay2()" id="settingsButton" style="border-radius: 50%;width: 50px; height: 50px;background-image: url('settings.png');background-size: cover;">
                      </div>

                      <!-- Button at the center -->
                      <div style="position: absolute; left: 50%; transform: translateX(-50%); text-align: center;">
                          <span class="text-center">
                              <span class="badge px-4 py-2 text-white" style="background-color: rgba(0,0,0,0.7);">
                                  <span data-translate="credit">CREDIT</span>: <span id="balanceText">1000.00</span>
                              </span>
                              <br>
                              <span class="text-white text-center" style="font-size: 1.0rem;">
                                  &lt; <span data-translate="demoGame">DEMO GAME</span> &gt;
                              </span>
                          </span>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  
      <!-- Stake Selection Overlay -->
      <div id="stakeOverlay" class="overlay" style="margin: 0 !important;padding: 0 !important;">
          <div class="divider-container">
              <div class="divider-wrapper">
                  <div class="divider"></div>
                  <div class="divider-text" data-translate="totalBet">TOTAL BET</div>
                  <div class="divider"></div>
              </div>
          </div>
          <div class="overlay-content-stake ">
              <div class="overlay-header">FUN</div>
              <div class="options-grid mx-auto" id="stakeOptions">
                  <button class="option-button" data-value="3.0">3.0</button>
                  <button class="option-button" data-value="1.5">1.5</button>
                  <button class="option-button" data-value="0.9">0.9</button>
                  <button class="option-button" data-value="0.6">0.6</button>
                  <button class="option-button selected" data-value="0.3">0.3</button>
              </div>
              <div class="text-center text-white mt-5 pt-5">
                  <span style="margin-left: 20px;">
                      Reels: 5
                  </span>
              </div>
              <div class="overlay-footer w-100">
                  <button style="display: none;" class="cancel-button px-4" id="cancelStake" data-translate="cancel">Cancel</button>
                  <button class="confirm-button px-5" id="confirmStake" data-translate="ok">OK</button>
              </div>
          </div>
      </div>
  
      <!-- Auto Spin Overlay -->
      <div id="autoSpinOverlay" class="overlay">
          <div class="divider-container">
              <div class="divider-wrapper">
                  <div class="divider"></div>
                  <div class="divider-text" data-translate="autoplay">AUTOPLAYS</div>
                  <div class="divider"></div>
              </div>
          </div>
          <div class="overlay-content w-100" style="margin-top: 20px !important;">
              <div class="mb-2 text-white" data-translate="numberOfSpins">
                  NUMBER OF SPINS
              </div>
              <div class="options-grid" id="autoSpinOptions">
                  <button class="option-button" data-value="0"><i class="fa fa-stop"></i></button>
                  <button class="option-button" data-value="999">999</button>
                  <button class="option-button" data-value="200">200</button>
                  <button class="option-button" data-value="100">100</button>
                  <button class="option-button" data-value="30">30</button>
              </div>
              
<div class="mt-4 mb-2 text-white" data-translate="lossLimit">
  LOSS LIMIT
</div>
<div class="options-grid" id="lossLimitOptions">
  <button class="option-button" data-value="Infinity"><i class="fa fa-infinity"></i></button>
  <button class="option-button" data-value="500">500<span style="font-size: 0.7rem;">x BET</span></button>
  <button class="option-button" data-value="100">100<span style="font-size: 0.7rem;">x BET</span></button>
  <button class="option-button" data-value="50">50<span style="font-size: 0.7rem;">x BET</span></button>
  <button class="option-button" data-value="10">10<span style="font-size: 0.7rem;">x BET</span></button>
</div>
              <div class="divider-container my-3">
                  <div class="divider-wrapper">
                      <div style="height: 2px;background-color: #e4d594;width: 25vw;"></div>
                      <div class="divider-text" data-translate="quickSpin">QUICK SPIN</div>
                      <div style="height: 2px;background-color: #e4d594;width: 25vw;"></div>
                  </div>
              </div>
              <div class="d-flex justify-content-center align-items-center">
                  <img id="quickspin-toggle" src="quickspin-a.png" style="height: 60px;width: 60px;" alt="">
              </div>
              <div class="overlay-footer">
                  <button class="cancel-button" id="cancelAutoSpin" data-translate="cancel">Cancel</button>
                  <button class="confirm-button px-5" id="confirmAutoSpin" data-translate="ok">Ok</button>
              </div>
          </div>
      </div>
  
      <!-- Settings Overlay -->
      <div id="settingsOverlay" class="overlay" style="background-color: rgb(0,0,0,0.8);margin: 0 !important;padding: 0 !important;">
          <div class="divider-container">
              <!-- <div class="divider-wrapper">
                  <div class="divider"></div>
                  <div class="divider-text">SETTINGS</div>
                  <div class="divider"></div>
              </div> -->
          </div>
          <div onclick="hideSettingsOverlay()" class="overlay-content w-100" style="height: 100%;;margin: 0 !important;padding: 0 !important;">
              <div>
                  

                  <div style="display: none;">
                      <div class="d-flex justify-content-center">
                          <div id="soundEffectsOption" class="sound-option selected mx-auto">
                              <div>
                                  <span id="soundEffectsIcon" class="icon-container">ðŸ”Š</span>
                              </div>
                          </div>
                      </div>
                  </div>
                  
              </div>
              
          </div>
          <div class="overlay-footer" style="background-image: url('bcg-settings.png');background-size: cover;margin: 0 !important;padding: 0 !important;">
              <div class="w-100 mb-2">
                  <div class="d-flex justify-content-around align-items-center py-5 px-3 w-100">
                      <div id="info_button" class="sound-option selected">
                          <div class="d-flex justify-content-center align-items-center" style="color:#e4d594;width: 30px;height: 30px;border-radius: 50%;border-color: #e4d594;border-style: solid;">
                              <i class="fas fa-question" style="font-size: 1.2rem;font-weight: bold;" ></i>
                          </div>
                      </div>
                      <div id="backgroundMusicOption" class="sound-option selected">
                          <div>
                              <span id="backgroundMusicIcon" class="icon-container">
                                  <i class="fa fa-volume-up" style="color: #e4d594;font-size: 1.4rem;"></i>
                              </span>
                          </div>
                      </div>
                  </div>
                  <div class="d-flex justify-content-center text-white">
                      <i class="fa fa-user px-1"></i> <span style="font-size: 0.7rem;">demo004817</span>
                  </div>
              </div>
              <div class="d-none">
                  <button class="cancel-button px-4" id="cancelSettings" data-translate="cancel">Cancel</button>
                  <button class="confirm-button px-5" id="confirmSettings" data-translate="ok">OK</button>
              </div>
          </div>
      </div>
  
  
  </div>
</div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/@fand/gifuct-js@1.0.0/src/index.min.js"></script>

  <script src="https://unpkg.com/omggif/omggif.js"></script>
  <script>
      // Language selector functionality
      document.addEventListener('DOMContentLoaded', function() {
          // Top 10 most spoken languages in the world
          const languages = [
              { code: "en", name: "English", flag: "ðŸ‡¬ðŸ‡§" },
              { code: "zh", name: "Chinese", flag: "ðŸ‡¨ðŸ‡³" },
              { code: "hi", name: "Hindi", flag: "ðŸ‡®ðŸ‡³" },
              { code: "es", name: "Spanish", flag: "ðŸ‡ªðŸ‡¸" },
              { code: "fr", name: "French", flag: "ðŸ‡«ðŸ‡·" },
              { code: "ar", name: "Arabic", flag: "ðŸ‡¸ðŸ‡¦" },
              { code: "bn", name: "Bengali", flag: "ðŸ‡§ðŸ‡©" },
              { code: "ru", name: "Russian", flag: "ðŸ‡·ðŸ‡º" },
              { code: "pt", name: "Portuguese", flag: "ðŸ‡µðŸ‡¹" },
              { code: "id", name: "Indonesian", flag: "ðŸ‡®ðŸ‡©" }
          ];

          // Translations for the game
          const translations = {
              "startButton": {
                  "en": "START",
                  "zh": "å¼€å§‹",
                  "hi": "à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",
                  "es": "COMENZAR",
                  "fr": "DÃ‰MARRER",
                  "ar": "Ø§Ø¨Ø¯Ø£",
                  "bn": "à¦¶à§à¦°à§",
                  "ru": "ÐÐÐ§ÐÐ¢Ð¬",
                  "pt": "INICIAR",
                  "id": "MULAI"
              },
              "featureButton": {
                  "en": "Feature",
                  "zh": "ç‰¹è‰²",
                  "hi": "à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾",
                  "es": "CaracterÃ­stica",
                  "fr": "FonctionnalitÃ©",
                  "ar": "Ù…ÙŠØ²Ø©",
                  "bn": "à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯",
                  "ru": "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ",
                  "pt": "Recurso",
                  "id": "Fitur"
              },
              "feature1": {
                  "en": "Feature 1",
                  "zh": "ç‰¹è‰² 1",
                  "hi": "à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾ 1",
                  "es": "CaracterÃ­stica 1",
                  "fr": "FonctionnalitÃ© 1",
                  "ar": "Ù…ÙŠØ²Ø© 1",
                  "bn": "à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯ 1",
                  "ru": "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ 1",
                  "pt": "Recurso 1",
                  "id": "Fitur 1"
              },
              "feature2": {
                  "en": "Feature 2",
                  "zh": "ç‰¹è‰² 2",
                  "hi": "à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾ 2",
                  "es": "CaracterÃ­stica 2",
                  "fr": "FonctionnalitÃ© 2",
                  "ar": "Ù…ÙŠØ²Ø© 2",
                  "bn": "à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯ 2",
                  "ru": "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ 2",
                  "pt": "Recurso 2",
                  "id": "Fitur 2"
              },
              "feature3": {
                  "en": "Feature 3",
                  "zh": "ç‰¹è‰² 3",
                  "hi": "à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾ 3",
                  "es": "CaracterÃ­stica 3",
                  "fr": "FonctionnalitÃ© 3",
                  "ar": "Ù…ÙŠØ²Ø© 3",
                  "bn": "à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯ 3",
                  "ru": "Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ 3",
                  "pt": "Recurso 3",
                  "id": "Fitur 3"
              },
              "gameRule": {
                  "en": "GAME RULE",
                  "zh": "æ¸¸æˆè§„åˆ™",
                  "hi": "à¤–à¥‡à¤² à¤¨à¤¿à¤¯à¤®",
                  "es": "REGLA DEL JUEGO",
                  "fr": "RÃˆGLE DU JEU",
                  "ar": "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©",
                  "bn": "à¦—à§‡à¦® à¦¨à¦¿à¦¯à¦¼à¦®",
                  "ru": "ÐŸÐ ÐÐ’Ð˜Ð›Ð Ð˜Ð“Ð Ð«",
                  "pt": "REGRA DO JOGO",
                  "id": "ATURAN PERMAINAN"
              },
              "denomination": {
                  "en": "Denomination",
                  "zh": "é¢é¢",
                  "hi": "à¤®à¥‚à¤²à¥à¤¯à¤µà¤°à¥à¤—",
                  "es": "DenominaciÃ³n",
                  "fr": "DÃ©nomination",
                  "ar": "ÙØ¦Ø©",
                  "bn": "à¦®à§‚à¦²à§à¦¯à¦®à¦¾à¦¨",
                  "ru": "ÐÐ¾Ð¼Ð¸Ð½Ð°Ð»",
                  "pt": "DenominaÃ§Ã£o",
                  "id": "Denominasi"
              },
              "betMultiplier": {
                  "en": "Bet Multiplier",
                  "zh": "æŠ•æ³¨ä¹˜æ•°",
                  "hi": "à¤¬à¥‡à¤Ÿ à¤—à¥à¤£à¤•",
                  "es": "Multiplicador de apuesta",
                  "fr": "Multiplicateur de mise",
                  "ar": "Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø±Ù‡Ø§Ù†",
                  "bn": "à¦¬à¦¾à¦œà¦¿ à¦—à§à¦£à¦•",
                  "ru": "ÐœÐ½Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒ ÑÑ‚Ð°Ð²ÐºÐ¸",
                  "pt": "Multiplicador de apostas",
                  "id": "Pengganda Taruhan"
              },
              "wild": {
                  "en": "WILD",
                  "zh": "ç™¾æ­",
                  "hi": "à¤µà¤¾à¤‡à¤²à¥à¤¡",
                  "es": "COMODÃN",
                  "fr": "JOKER",
                  "ar": "ÙˆØ§ÙŠÙ„Ø¯",
                  "bn": "à¦“à¦¯à¦¼à¦¾à¦‡à¦²à§à¦¡",
                  "ru": "Ð”Ð˜ÐšÐ˜Ð™",
                  "pt": "CURINGA",
                  "id": "LIAR"
              },
              "freeSpinBonus": {
                  "en": "FREE SPIN BONUS",
                  "zh": "å…è´¹æ—‹è½¬å¥–åŠ±",
                  "hi": "à¤«à¥à¤°à¥€ à¤¸à¥à¤ªà¤¿à¤¨ à¤¬à¥‹à¤¨à¤¸",
                  "es": "BONO DE GIRO GRATIS",
                  "fr": "BONUS DE TOURS GRATUITS",
                  "ar": "Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ",
                  "bn": "à¦«à§à¦°à¦¿ à¦¸à§à¦ªà¦¿à¦¨ à¦¬à§‹à¦¨à¦¾à¦¸",
                  "ru": "Ð‘ÐžÐÐ£Ð¡ Ð‘Ð•Ð¡ÐŸÐ›ÐÐ¢ÐÐ«Ð¥ Ð’Ð ÐÐ©Ð•ÐÐ˜Ð™",
                  "pt": "BÃ”NUS DE RODADAS GRÃTIS",
                  "id": "BONUS PUTARAN GRATIS"
              },
              "paytable": {
                  "en": "PAYTABLE",
                  "zh": "èµ”çŽ‡è¡¨",
                  "hi": "à¤ªà¥‡à¤Ÿà¥‡à¤¬à¤²",
                  "es": "TABLA DE PAGOS",
                  "fr": "TABLE DE PAIEMENT",
                  "ar": "Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙØ¹",
                  "bn": "à¦ªà§‡à¦Ÿà§‡à¦¬à¦²",
                  "ru": "Ð¢ÐÐ‘Ð›Ð˜Ð¦Ð Ð’Ð«ÐŸÐ›ÐÐ¢",
                  "pt": "TABELA DE PAGAMENTOS",
                  "id": "TABEL PEMBAYARAN"
              },
              "win": {
                  "en": "WIN",
                  "zh": "èµ¢",
                  "hi": "à¤œà¥€à¤¤",
                  "es": "GANAR",
                  "fr": "GAIN",
                  "ar": "ÙÙˆØ²",
                  "bn": "à¦œà¦¯à¦¼",
                  "ru": "Ð’Ð«Ð˜Ð“Ð Ð«Ð¨",
                  "pt": "GANHAR",
                  "id": "MENANG"
              },
              "credit": {
                  "en": "CREDIT",
                  "zh": "ä¿¡ç”¨",
                  "hi": "à¤•à¥à¤°à¥‡à¤¡à¤¿à¤Ÿ",
                  "es": "CRÃ‰DITO",
                  "fr": "CRÃ‰DIT",
                  "ar": "Ø±ØµÙŠØ¯",
                  "bn": "à¦•à§à¦°à§‡à¦¡à¦¿à¦Ÿ",
                  "ru": "ÐšÐ Ð•Ð”Ð˜Ð¢",
                  "pt": "CRÃ‰DITO",
                  "id": "KREDIT"
              },
              "demoGame": {
                  "en": "DEMO GAME",
                  "zh": "æ¼”ç¤ºæ¸¸æˆ",
                  "hi": "à¤¡à¥‡à¤®à¥‹ à¤—à¥‡à¤®",
                  "es": "JUEGO DE DEMOSTRACIÃ“N",
                  "fr": "JEU DE DÃ‰MONSTRATION",
                  "ar": "Ù„Ø¹Ø¨Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©",
                  "bn": "à¦¡à§‡à¦®à§‹ à¦—à§‡à¦®",
                  "ru": "Ð”Ð•ÐœÐž-Ð˜Ð“Ð Ð",
                  "pt": "JOGO DE DEMONSTRAÃ‡ÃƒO",
                  "id": "PERMAINAN DEMO"
              },
              "totalBet": {
                  "en": "TOTAL BET",
                  "zh": "æ€»æŠ•æ³¨",
                  "hi": "à¤•à¥à¤² à¤¦à¤¾à¤‚à¤µ",
                  "es": "APUESTA TOTAL",
                  "fr": "MISE TOTALE",
                  "ar": "Ø§Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",
                  "bn": "à¦®à§‹à¦Ÿ à¦¬à¦¾à¦œà¦¿",
                  "ru": "ÐžÐ‘Ð©ÐÐ¯ Ð¡Ð¢ÐÐ’ÐšÐ",
                  "pt": "APOSTA TOTAL",
                  "id": "TOTAL TARUHAN"
              },
              "autoplay": {
                  "en": "AUTOPLAYS",
                  "zh": "è‡ªåŠ¨æ’­æ”¾",
                  "hi": "à¤‘à¤Ÿà¥‹à¤ªà¥à¤²à¥‡",
                  "es": "AUTOJUEGOS",
                  "fr": "JEUX AUTOMATIQUES",
                  "ar": "ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ",
                  "bn": "à¦…à¦Ÿà§‹à¦ªà§à¦²à§‡",
                  "ru": "ÐÐ’Ð¢ÐžÐ˜Ð“Ð Ð«",
                  "pt": "JOGOS AUTOMÃTICOS",
                  "id": "PUTAR OTOMATIS"
              },
              "numberOfSpins": {
                  "en": "NUMBER OF SPINS",
                  "zh": "æ—‹è½¬æ¬¡æ•°",
                  "hi": "à¤¸à¥à¤ªà¤¿à¤¨ à¤•à¥€ à¤¸à¤‚à¤–à¥à¤¯à¤¾",
                  "es": "NÃšMERO DE GIROS",
                  "fr": "NOMBRE DE TOURS",
                  "ar": "Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª",
                  "bn": "à¦¸à§à¦ªà¦¿à¦¨à§‡à¦° à¦¸à¦‚à¦–à§à¦¯à¦¾",
                  "ru": "ÐšÐžÐ›Ð˜Ð§Ð•Ð¡Ð¢Ð’Ðž Ð’Ð ÐÐ©Ð•ÐÐ˜Ð™",
                  "pt": "NÃšMERO DE RODADAS",
                  "id": "JUMLAH PUTARAN"
              },
              "lossLimit": {
                  "en": "LOSS LIMIT",
                  "zh": "æŸå¤±é™åˆ¶",
                  "hi": "à¤¹à¤¾à¤¨à¤¿ à¤¸à¥€à¤®à¤¾",
                  "es": "LÃMITE DE PÃ‰RDIDA",
                  "fr": "LIMITE DE PERTE",
                  "ar": "Ø­Ø¯ Ø§Ù„Ø®Ø³Ø§Ø±Ø©",
                  "bn": "à¦•à§à¦·à¦¤à¦¿ à¦¸à§€à¦®à¦¾",
                  "ru": "Ð›Ð˜ÐœÐ˜Ð¢ ÐŸÐ ÐžÐ˜Ð“Ð Ð«Ð¨Ð",
                  "pt": "LIMITE DE PERDA",
                  "id": "BATAS KERUGIAN"
              },
              "quickSpin": {
                  "en": "QUICK SPIN",
                  "zh": "å¿«é€Ÿæ—‹è½¬",
                  "hi": "à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤¸à¥à¤ªà¤¿à¤¨",
                  "es": "GIRO RÃPIDO",
                  "fr": "TOUR RAPIDE",
                  "ar": "Ø¯ÙˆØ±Ø§Ù† Ø³Ø±ÙŠØ¹",
                  "bn": "à¦¦à§à¦°à§à¦¤ à¦¸à§à¦ªà¦¿à¦¨",
                  "ru": "Ð‘Ð«Ð¡Ð¢Ð ÐžÐ• Ð’Ð ÐÐ©Ð•ÐÐ˜Ð•",
                  "pt": "GIRO RÃPIDO",
                  "id": "PUTARAN CEPAT"
              },
              "ok": {
                  "en": "OK",
                  "zh": "ç¡®å®š",
                  "hi": "à¤ à¥€à¤• à¤¹à¥ˆ",
                  "es": "OK",
                  "fr": "OK",
                  "ar": "Ù…ÙˆØ§ÙÙ‚",
                  "bn": "à¦ à¦¿à¦• à¦†à¦›à§‡",
                  "ru": "ÐžÐš",
                  "pt": "OK",
                  "id": "OKE"
              },
              "cancel": {
                  "en": "Cancel",
                  "zh": "å–æ¶ˆ",
                  "hi": "à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚",
                  "es": "Cancelar",
                  "fr": "Annuler",
                  "ar": "Ø¥Ù„ØºØ§Ø¡",
                  "bn": "à¦¬à¦¾à¦¤à¦¿à¦²",
                  "ru": "ÐžÑ‚Ð¼ÐµÐ½Ð°",
                  "pt": "Cancelar",
                  "id": "Batal"
              }
          };

          // Get DOM elements
          const dropdown = document.getElementById('language-dropdown');
          const dropdownContent = document.getElementById('language-dropdown-content');
          
          // Current language (default to English)
          let currentLanguage = localStorage.getItem('selectedLanguage') || 'en';
          
          // Initialize dropdown
          function initializeLanguageDropdown() {
              // Create language options
              languages.forEach(language => {
                  const option = document.createElement('div');
                  option.className = 'language-option';
                  if (language.code === currentLanguage) {
                      option.classList.add('selected');
                  }
                  option.innerHTML = `
                      <span class="language-flag">${language.flag}</span>
                      <span class="language-name">${language.name}</span>
                  `;
                  option.setAttribute('data-lang', language.code);
                  
                  // Add click event
                  option.addEventListener('click', function() {
                      changeLanguage(language.code);
                      dropdownContent.classList.remove('show');
                  });
                  
                  dropdownContent.appendChild(option);
              });
              
              // Set initial dropdown text
              updateDropdownText();
              
              // Apply initial translations
              translatePage(currentLanguage);
          }
          
          // Toggle dropdown
          dropdown.addEventListener('click', function(e) {
              e.stopPropagation();
              dropdownContent.classList.toggle('show');
          });
          
          // Close dropdown when clicking outside
          document.addEventListener('click', function() {
              dropdownContent.classList.remove('show');
          });
          
          // Change language
          function changeLanguage(langCode) {
              currentLanguage = langCode;
              localStorage.setItem('selectedLanguage', langCode);
              document.documentElement.lang = langCode;
              
              // Update dropdown text
              updateDropdownText();
              
              // Update selected option
              const options = dropdownContent.querySelectorAll('.language-option');
              options.forEach(option => {
                  if (option.getAttribute('data-lang') === langCode) {
                      option.classList.add('selected');
                  } else {
                      option.classList.remove('selected');
                  }
              });
              
              // Translate the page
              translatePage(langCode);
          }
          
          // Update dropdown button text
          function updateDropdownText() {
              const selectedLang = languages.find(lang => lang.code === currentLanguage);
              if (selectedLang) {
                  dropdown.innerHTML = `
                      <span class="language-flag">${selectedLang.flag}</span>
                      <span class="language-name-full">${selectedLang.name}</span>
                      <i class="fas fa-chevron-down"></i>
                  `;
              }
          }
          
          // Translate the page
          function translatePage(langCode) {
              const elements = document.querySelectorAll('[data-translate]');
              elements.forEach(element => {
                  const key = element.getAttribute('data-translate');
                  if (translations[key] && translations[key][langCode]) {
                      element.textContent = translations[key][langCode];
                  } else if (translations[key] && translations[key]['en']) {
                      // Fallback to English
                      element.textContent = translations[key]['en'];
                  }
              });
          }
          
          // Initialize
          initializeLanguageDropdown();
      });

      // Original game scripts
      coinImages = [
          "coins/0_BigWin_SS.png", "coins/1_BigWin_SS.png", "coins/2_BigWin_SS.png", "coins/3_BigWin_SS.png",
          "coins/4_BigWin_SS.png", "coins/5_BigWin_SS.png", "coins/6_BigWin_SS.png", "coins/7_BigWin_SS.png",
          "coins/8_BigWin_SS.png", "coins/9_BigWin_SS.png", "coins/10_BigWin_SS.png", "coins/11_BigWin_SS.png",
          "coins/12_BigWin_SS.png", "coins/13_BigWin_SS.png", "coins/14_BigWin_SS.png", "coins/15_BigWin_SS.png",
          "coins/16_BigWin_SS.png", "coins/17_BigWin_SS.png", "coins/18_BigWin_SS.png", "coins/19_BigWin_SS.png",
          "coins/20_BigWin_SS.png", "coins/21_BigWin_SS.png", "coins/22_BigWin_SS.png", "coins/23_BigWin_SS.png",
          "coins/24_BigWin_SS.png", "coins/25_BigWin_SS.png", "coins/26_BigWin_SS.png", "coins/27_BigWin_SS.png",
          "coins/28_BigWin_SS.png", "coins/29_BigWin_SS.png", "coins/30_BigWin_SS.png"
      ];
    

    // Preload images for smoother animation
    coinImages.forEach(src => {
      const img = new Image();
      img.src = src;
      img.crossOrigin = "anonymous";
    });

    // Win level configurations
    const winLevels = {
      big: {
        imgSrc: 'winlevels/bigwin.png',
        text: 'BIG WIN',
        textClass: 'big-win',
        sunburstClass: 'big-win-color',
        threshold: 100,
        coinCount: 100
      },
      mega: {
        imgSrc: 'winlevels/megawin.png',
        text: 'MEGA WIN',
        textClass: 'mega-win',
        sunburstClass: 'mega-win-color',
        threshold: 300,
        coinCount: 200
      },
      ultra: {
        imgSrc: 'winlevels/ultrawin.png',
        text: 'ULTRA WIN',
        textClass: 'ultra-win',
        sunburstClass: 'ultra-win-color',
        threshold: Infinity,
        coinCount: 320
      }
    };

    // Function to determine win level based on amount
    function getWinLevel(amount) {
      if (amount < winLevels.big.threshold) {
        return 'big';
      } else if (amount < winLevels.mega.threshold) {
        return 'mega';
      } else {
        return 'ultra';
      }
    }

    // Function to show the win animation
    function showWinAnimation(amount) {
      // do not show big win animation during free spins
      if (autoSpins > 0 || isFreeSpinMode){
          return
      }
      // Reset any existing animations
      clearTimeout(window.autoCloseTimeout);
      
      // Set initial win level
      let currentLevel = 'big';
      document.getElementById('winImg').src = "winlevels/bigwin.png";
      updateWinLevel(currentLevel);
      
      // Show the overlay
      const winOverlay = document.getElementById('winOverlay');
      winOverlay.style.display = 'flex';
      
      // Start with $0
      let currentAmount = 0;
      const winAmount = document.getElementById('winAmount');
      winAmount.textContent = '$' + currentAmount.toLocaleString();
      
      // Create the coin fountain
      setTimeout(() => {
        createCoinFountain(winLevels[currentLevel].coinCount);
      }, 100);
      
      // Animate the counter
      const duration = 7000; // 5 seconds for the counter
      const fps = 60;
      const increment = amount / (duration / 1000 * fps);
      const startTime = performance.now();
      
      function updateCounter(timestamp) {
        const elapsed = timestamp - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        currentAmount = progress * amount;
        winAmount.textContent = '$' + Math.floor(currentAmount).toLocaleString();
        
        // Check if we need to upgrade the win level
        const newLevel = getWinLevel(currentAmount);
        if (newLevel !== currentLevel) {
          currentLevel = newLevel;
          updateWinLevel(currentLevel);
          
          // Add more coins for the new level
          createCoinFountain(winLevels[currentLevel].coinCount);
        }
        
        if (progress < 1) {
          requestAnimationFrame(updateCounter);
        } else {
          // Counter finished
          winAmount.textContent = '$' + amount.toLocaleString();
          
          // Auto close after 3 seconds
          window.autoCloseTimeout = setTimeout(() => {
            closeWinAnimation();
          }, 5000);
        }
      }
      
      requestAnimationFrame(updateCounter);
    }
    
    // Function to update the win level visuals
    function updateWinLevel(level) {
      const winText = document.getElementById('winText');
      const winImg = document.getElementById('winImg');
      const sunburst = document.getElementById('sunburst');
      
      // Remove all classes
      winText.classList.remove('big-win', 'mega-win', 'ultra-win');
      sunburst.classList.remove('big-win-color', 'mega-win-color', 'ultra-win-color');
      
      // Add new classes
      winText.classList.add(winLevels[level].textClass);
      sunburst.classList.add(winLevels[level].sunburstClass);
      
      winImg.style.transform = 'scale(0.8)';
      setTimeout(() => {
        winImg.src = winLevels[level].imgSrc;
        winImg.style.transform = 'scale(1.2)';
        setTimeout(() => {
          winImg.style.transform = 'scale(1)';
        }, 150);
      }, 150);
    }

    // Function to close the win animation
    function closeWinAnimation() {
      removeBonusFrame()
      const winOverlay = document.getElementById('winOverlay');
      winOverlay.style.display = 'none';
      clearTimeout(window.autoCloseTimeout);
      
      // Clear all coins
      const coinsContainer = document.getElementById('coinsContainer');
      coinsContainer.innerHTML = '';
    }

    // Function to create the coin fountain with 3D rotating coins
    function createCoinFountain(numberOfCoins) {
      const coinsContainer = document.getElementById('coinsContainer');
      
      // Create fountain of coins
      const containerWidth = coinsContainer.offsetWidth;
      const containerHeight = coinsContainer.offsetHeight;
      
      // Center bottom position
      const centerX = containerWidth / 2;
      
      // Adjust coin count based on screen size
      const isMobile = window.innerWidth < 576;
      const actualCoinCount = isMobile ? Math.floor(numberOfCoins * 0.6) : numberOfCoins;
      
      for (let i = 0; i < actualCoinCount; i++) {
        setTimeout(() => {
          // Create coin container element
          const coin = document.createElement('div');
          coin.className = 'coin';
          
          // Random size between 10-30px on mobile, 20-40px on desktop
          const minSize = isMobile ? 15 : 25;
          const maxSizeRange = isMobile ? 25 : 25;
          const coinSize = Math.floor(Math.random() * maxSizeRange) + minSize;
          coin.style.width = `${coinSize}px`;
          coin.style.height = `${coinSize}px`;
          
          // Create the img element inside the coin div
          const coinImg = document.createElement('img');
          coinImg.src = coinImages[0]; // Start with the first image
          coinImg.style.width = '100%';
          coinImg.style.height = '100%';
          coinImg.crossOrigin = "anonymous"; // Avoid CORS issues
          coin.appendChild(coinImg);
          
          // Start at center bottom with slight random offset
          const startX = centerX + (Math.random() - 0.5) * 50;
          coin.style.left = `${startX}px`;
          coin.style.bottom = '0px';
          
          // Add to container
          coinsContainer.appendChild(coin);
          
          // Animate the coin in a fountain pattern with 3D rotation
          animateCoinFountain(coin, coinImg, startX, containerHeight);
        }, i * 70); // Stagger the coin creation
      }
    }

    // Function to animate a single coin in a fountain pattern with 3D rotation
    function animateCoinFountain(coin, coinImg, startX, containerHeight) {
      const coinsContainer = document.getElementById('coinsContainer');
      const containerWidth = coinsContainer.offsetWidth;
      
      // Adjust physics based on screen size
      const isMobile = window.innerWidth < 576;
      const velocityMultiplier = isMobile ? 0.8 : 1;
      
      // Random angle for the fountain spread (narrower at the bottom, wider at the top)
      const angle = ((Math.random() - 0.5) * Math.PI) / 2; // -45 to +45 degrees
      
      // Random initial velocity (speed)
      const initialVelocity = (15 + Math.random() * 10) * velocityMultiplier;
      
      // Calculate velocity components
      const vx = initialVelocity * Math.sin(angle);
      const vy = initialVelocity * Math.cos(angle);
      
      // Animation parameters
      const gravity = 0.5 * velocityMultiplier;
      const duration = 2000 + Math.random() * 1000;
      const fps = 60;
      const totalFrames = (duration / 1000) * fps;
      
      // Animation variables
      let currentFrame = 0;
      let x = startX;
      let y = 0;
      let velocityY = vy;
      
      // 3D rotation variables
      let currentImageIndex = 0;
      const rotationSpeed = (0.1 + Math.random() * 0.2) * velocityMultiplier; // Random rotation speed
      
      // Animation function
      const animate = () => {
        if (!coin.parentNode) return; // Stop if coin was removed
        
        // Update position with gravity
        x += vx;
        velocityY -= gravity;
        y += velocityY;
        
        // Update coin position
        coin.style.left = `${x}px`;
        coin.style.bottom = `${y}px`;
        
        // Update 3D rotation - change the image based on the current frame
        currentImageIndex = (currentImageIndex + rotationSpeed) % coinImages.length;
        coinImg.src = coinImages[Math.floor(currentImageIndex)];
        
        // Add perspective tilt based on movement direction
        const tiltX = vx * 2; // Tilt based on horizontal velocity
        const tiltY = velocityY; // Tilt based on vertical velocity
        coin.style.transform = `perspective(500px) rotateX(${tiltY}deg) rotateY(${tiltX}deg)`;
        
        // Adjust shadow based on height
        const shadowBlur = Math.min(5 + y/20, 15);
        coin.style.filter = `drop-shadow(0 0 ${shadowBlur}px rgba(255, 215, 0, 0.7))`;
        
        // Check if coin is still visible
        if (y < -100 || x < -100 || x > containerWidth + 100) {
          if (coin.parentNode) {
            coin.parentNode.removeChild(coin);
          }
          return;
        }
        
        // Continue animation
        currentFrame++;
        if (currentFrame < totalFrames) {
          requestAnimationFrame(animate);
        } else {
          // Remove coin after animation completes
          if (coin.parentNode) {
            coin.parentNode.removeChild(coin);
          }
        }
      };
      
      // Start animation
      requestAnimationFrame(animate);
    }

    // Handle window resize
    window.addEventListener('resize', function() {
      // Adjust sunburst size if needed
      const sunburstContainer = document.querySelector('.sunburst-container');
      if (sunburstContainer) {
        const size = Math.min(window.innerWidth * 0.8, 400);
        sunburstContainer.style.width = `${size}px`;
        sunburstContainer.style.height = `${size}px`;
      }
    });

    document.getElementById('closeBtn').addEventListener('click', () => {
      closeWinAnimation();
    });
    
    document.getElementById('winOverlay').addEventListener('click', (e) => {
      if (e.target === document.getElementById('winOverlay')) {
        closeWinAnimation();
      }
    });

    // Make the function available globally
    window.showWinAnimation = showWinAnimation;
    window.closeWinAnimation = closeWinAnimation;


      ///separator

      async function fetchGifAsBuffer(url) {
      const response = await fetch(url);
      const arrayBuffer = await response.arrayBuffer();
      return arrayBuffer;
      }

      async function getGifDuration(url) {
      const arrayBuffer = await fetchGifAsBuffer(url);
      const gif = gifuct.parseGIF(arrayBuffer);
      const frames = gifuct.decompressFrames(gif, true);
      
      const duration = frames.reduce((total, frame) => {
          const delay = frame.delay || 10; // in hundredths of a second
          return total + delay * 10; // convert to milliseconds
      }, 0);

      return duration;
      }

      async function onGifFinish(url, callback) {
      const duration = await getGifDuration(url);
      console.log(`GIF duration: ${duration}ms`);
      setTimeout(callback, duration);
      }

      // Use the function
      const gifElement = document.getElementById("myGif");
      const gifUrl = gifElement?.src;

      if (gifElement && gifUrl) {
          onGifFinish(gifUrl, () => {
              console.log("GIF finished playing once.");
              // You can trigger any logic here, like hiding the GIF or showing a message
          });
      }
</script>


  <script>
      if (window.innerWidth >= 900) {
          document.getElementById("device_overlay").style.display = "none";
      }

      document.addEventListener("DOMContentLoaded", function () {
          let loaderBar = document.getElementById("loader-bar");
          let progress = 0;
          
          function updateProgress() {
              progress += Math.random() * 10;
              if (progress < 100) {
                  loaderBar.style.width = progress + "%";
                  setTimeout(updateProgress, 200);
              } else {
                  loaderBar.style.width = "100%";
                  setTimeout(() => document.querySelector(".loader-container").style.display = "none", 500);
                  document.getElementById('jdb_overlay').style.display = "none";
              }
          }
          
          updateProgress();
      });

      // Background music
      const backgroundMusic = new Audio();
      backgroundMusic.src = 'gameaudio.mp3';
      backgroundMusic.loop = true;
      backgroundMusic.volume = 0.5;
      backgroundMusic.preload = 'auto';

      // const backgroundMusic = new Audio();
      // backgroundMusic.src = "gameaudio.mp3";
      // backgroundMusic.loop = true;
      // backgroundMusic.volume = 0.5;

      function hideKongOverlay(){
          document.getElementById('kong_overlay').style.display = "none";
          // Try to play background music (will be blocked by browsers until user interaction)
          backgroundMusic.play().catch(e => console.log("Audio play failed:", e));
      }

      // Mobile-optimized game configuration
      const gameContainer = document.querySelector('.game-canvas-container');
      const app = new PIXI.Application({
          width: gameContainer.clientWidth,
          height: gameContainer.clientHeight,
          autoDensity: true,
          resolution: window.devicePixelRatio || 1,
          transparent: true
      });
      gameContainer.appendChild(app.view);

      // Load the background image
      const backgroundTexture = PIXI.Texture.from('nbcg2.png');
      const backgroundSprite = new PIXI.Sprite(backgroundTexture);


      // Function to resize the background
      function resizeBackground() {
          backgroundSprite.width = app.screen.width;
          backgroundSprite.height = app.screen.height;
      }

      // Ensure the background resizes properly
      resizeBackground();
      app.stage.addChild(backgroundSprite);


      // Change the background image
      function changeBackground(newImagePath) {
          const newTexture = PIXI.Texture.from(newImagePath);
          backgroundSprite.texture = newTexture;
      }


      // Handle window resizing
      window.addEventListener('resize', () => {
          app.renderer.resize(gameContainer.clientWidth, gameContainer.clientHeight);
          resizeBackground();
      });

      // Kong game constants
      const KONG_SYMBOLS = {
      "Treasure Chest": {
          name: "Treasure Chest",
          image: 'treasurechest.png',
          payouts: [0, 0, 40, 100, 250]
      },
      "Explorer": {
          name: "Explorer",
          image: 'explorer.png',
          payouts: [0, 0, 30, 80, 200]
      },
      "Compass": {
          name: "Compass",
          image: 'compass.png',
          payouts: [0, 0, 25, 60, 175]
      },
      "Binoculars": {
          name: "Binoculars",
          image: 'binoculars.png',
          payouts: [0, 0, 20, 50, 150]
      },
      "A": {
          name: "A",
          image: 'a.png',
          payouts: [0, 0, 10, 20, 100]
      },
      "K": {
          name: "K",
          image: 'k.png',
          payouts: [0, 0, 8, 15, 90]
      },
      "Q": {
          name: "Q",
          image: 'q.png',
          payouts: [0, 0, 6, 12, 80]
      },
      "J": {
          name: "J",
          image: 'j.png',
          payouts: [0, 0, 5, 10, 70]
      },
      "Wild": {
          name: "Wild",
          image: 'wild.png',
          payouts: [0, 0, 50, 125, 300]  },
      "Scatter": {
          name: "Scatter",
          image: 'scatter.png',
          payouts: [0, 0, 5, 20, 50]
      }
  };

      // Bet levels as defined in the documentation
      const BET_LEVELS = [0.3, 0.6, 0.9, 1.5, 3.0];

      // Multiplier mapping for bet amounts
      const BET_MULTIPLIERS = {
          0.3: 1,
          0.6: 2,
          0.9: 3,
          1.5: 5,
          3.0: 10
      };

      // Game variables
      const symbols = [
      { name: 'Treasure Chest', image: 'treasurechest.png', multiplier: 2 },
      { name: 'Explorer', image: 'explorer.png', multiplier: 5 },
      { name: 'Compass', image: 'compass.png', multiplier: 5 },
      { name: 'Binoculars', image: 'binoculars.png', multiplier: 5 },
      { name: 'A', image: 'a.png', multiplier: 5 },
      { name: 'K', image: 'k.png', multiplier: 5 },
      { name: 'Q', image: 'q.png', multiplier: 5 },
      { name: 'J', image: 'j.png', multiplier: 5 },
      { name: 'Wild', image: 'wild.png', multiplier: 10 },
      { name: 'Scatter', image: 'scatter.png', multiplier: 3 }
  ];
      const symbolMultiplierMap = new Map(symbols.map(s => [s.name, s.multiplier]));

      // Preload reel background image
      // const reelBackgroundTexture = PIXI.Texture.from('reel-bg.jpg');

      const reels = [];
      const reelSymbols = []; // Array to track symbols separately from reel containers
      const numReels = 5;
      const numRows = 3;
      let spinning = false;
      let balance = 1000;
      let stake = 0.3;
      let autoSpins = 0;
      let currentInterval;
      let selectedStake = 0.3; // Default stake value
      let selectedAutoSpins = 0; // Default auto spins value
      let initialBalance = 0;
      let lossLimit = Infinity; // Default to no limit
      let selectedLossLimit = Infinity; // Default selected loss limit

      // Free spins state
      let freeSpinTriggeredRecently = false;
      let isQuickSpinMode = false
      let isFreeSpinMode = false;
      let freeSpinCount = 0;
      let remainingFreeSpinCount = 0;
      let bonusMultiplier = 0;
      let originalBetAmount = 0;

      // Sound control variables
      let soundEffectsEnabled = true;
      let backgroundMusicEnabled = true;
      let tempSoundEffectsEnabled = true;
      let tempBackgroundMusicEnabled = true;

      // Display elements
      const featuresButton = document.getElementById('featuresButton')
      const featuresOverlay = document.getElementById('featuresOverlay')
      const remainingAutoSpins = document.getElementById('remainingAutoSpins')
      const spinButtonInnerImage = document.getElementById('spin_img')
      const balanceText = document.getElementById('balanceText');
      const currentStakeElement = document.getElementById('currentStake');
      const spinButton = document.getElementById('spinButton');
      const autoPlayButton = document.getElementById('autoPlayButton');
      const stakeButton = document.getElementById('stakeButton');
      const stakeOverlay = document.getElementById('stakeOverlay');
      const infoOverlay = document.getElementById('gameinfo_overlay');
      const closeInfoButton = document.getElementById('close_info_button');
      const infoButton = document.getElementById('info_button')
      const autoSpinOverlay = document.getElementById('autoSpinOverlay');
      const stakeOptions = document.getElementById('stakeOptions');
      const autoSpinOptions = document.getElementById('autoSpinOptions');
      const cancelStakeButton = document.getElementById('cancelStake');
      const confirmStakeButton = document.getElementById('confirmStake');
      const cancelAutoSpinButton = document.getElementById('cancelAutoSpin');
      const confirmAutoSpinButton = document.getElementById('confirmAutoSpin');
      const winMessageElement = document.getElementById('win-message');
      const winAmountElement = document.getElementById('win-amount');
      const freeSpinsIndicator = document.getElementById('free-spins-indicator');
      const freeSpinsCountElement = document.getElementById('free-spins-count');
      const bonusMultiplierElement = document.getElementById('bonus-multiplier');

      // Settings elements
      const gameMode = {
          'mode': 'live'
      }
      const currentDemoFeature = {
          "feature": "normal spin"
      }

      const startFreeSpinsOverlay = document.getElementById('startfreespinsoverlay');
      const startFreeSpinsButton = document.getElementById('startfreespinsbutton');
      const freeSpinsOverlay = document.getElementById('freespinsoverlay');
      const freeSpinsOverlayImg = document.getElementById('freespinsoverlayimg');
      const freeSpinsOverlayImg2 = document.getElementById('freespinsoverlayimg2');
      let autoSpinsStopped = true;
      const quickspinToggleImg = document.getElementById("quickspin-toggle");
      const settingsButton = document.getElementById('settingsButton');
      const settingsOverlay = document.getElementById('settingsOverlay');
      const soundEffectsOption = document.getElementById('soundEffectsOption');
      const backgroundMusicOption = document.getElementById('backgroundMusicOption');
      const soundEffectsIcon = document.getElementById('soundEffectsIcon');
      const backgroundMusicIcon = document.getElementById('backgroundMusicIcon');
      const cancelSettingsButton = document.getElementById('cancelSettings');
      const confirmSettingsButton = document.getElementById('confirmSettings');

      // Sound effects
      const spinSound = new Audio();
      spinSound.src = 'spin.mp3';
      spinSound.preload = 'auto';
      
      const winSound = new Audio();
      winSound.src = 'win.mp3';
      winSound.preload = 'auto';


quickspinToggleImg.addEventListener("click", function () {
          quickspinToggleImg.src = quickspinToggleImg.src.includes("quickspin-a.png") ? "quickspin-b.png" : "quickspin-a.png";
          if (quickspinToggleImg.src.includes("quickspin-a.png")) {
              // const div = document.getElementById("confirmAutoSpin");
              // div.style.backgroundColor = "#333";
              // div.style.boxShadow = "0 0 4px #e4d594";
              // div.style.color = "white";
              isQuickSpinMode = false;
          } else if (quickspinToggleImg.src.includes("quickspin-b.png")) {
              // const div = document.getElementById("confirmAutoSpin");
              // div.style.backgroundColor = "#333";
              // div.style.color = "white";
              // div.style.boxShadow = "none";
              isQuickSpinMode = true;
          }
      });

      

      startFreeSpinsButton.addEventListener("click", function () {
          startFreeSpinsOverlay.style.display = "none";
          spin()
      });
      
      
      function updateAutoSpinStatus(){
          if (autoSpinsStopped){
              selectedAutoSpins = 0
              const autoSpinOptionButtons = autoSpinOptions.querySelectorAll('.option-button');
              autoSpinOptionButtons.forEach(button => {
                  if (button.classList.contains('selected')) {
                      button.classList.remove('selected');
                  }
              });
              autoPlayButton.innerHTML = `<img src="autospininnerimg.png" class="autospininner-img"  alt="">`
          }
          else{
              autoPlayButton.innerHTML = `<img src="autospininnerimgstop.png" class="autospininnerimgstop"  alt="">`
          }
      }

      function setDemoFeature(feature){
          isFirstSpin = true; //set first spin to true so as to trigger the passed feature
          currentDemoFeature.feature = feature;
          featuresOverlay.style.display = "none";
          spin()
      }

      featuresButton.onclick = () => {
          featuresOverlay.style.display = "block";
      };

      


      function rotateSpinButtonImage(){
          spinButtonInnerImage.style.transform = 'rotate(180deg)';
      }

      // Calculate reel dimensions based on available space
      function calculateReelDimensions() {
          const availableWidth = app.screen.width;
          const availableHeight = app.screen.height;
          
          const reelWidth = availableWidth / numReels * 0.99;
          const reelHeight = availableHeight * 0.99;
          
          return { reelWidth, reelHeight };
      }

      // Create reels
      function createReels() {
          // Clear existing reels
          reels.forEach(reel => {
              app.stage.removeChild(reel);
          });
          reels.length = 0;
          reelSymbols.length = 0;
          
          const { reelWidth, reelHeight } = calculateReelDimensions();

          

          // Load animated GIF as frames (you must have frame0.png, frame1.png, ..., frameN.png)

          const frameTextures = [];
          const totalFrames = 12; // ðŸ” Update this to match how many frames your GIF has

          for (let f = 0; f < totalFrames; f++) {
              frameTextures.push(PIXI.Texture.from(`green/${f}_Base_Reel_SpeedUp_SS.png`));
          }

          for (let i = 0; i < numReels; i++) {
              const reel = new PIXI.Container();
              reel.x = (app.screen.width / numReels) * i + (app.screen.width / numReels - reelWidth) / 2;
              reel.y = (app.screen.height - reelHeight) / 2;

              const symbolContainer = new PIXI.Container();
              reel.addChild(symbolContainer);

              reels.push(reel);
              reelSymbols.push(symbolContainer);
              app.stage.addChild(reel);
          
          }

          // Populate reels
          populateReels();
      }

      // Populate all reels with symbols
      function populateReels() {
          for (let i = 0; i < numReels; i++) {
              populateReel(i);
          }
      }

      // Populate a single reel with symbols
      function populateReel(reelIndex) {
          const symbolContainer = reelSymbols[reelIndex];
          symbolContainer.removeChildren();
          
          const { reelWidth, reelHeight } = calculateReelDimensions();
          
          const rowSymbols = [];
          for (let j = 0; j < numRows; j++) {
              const symbol = symbols[Math.floor(Math.random() * symbols.length)];
              const texture = PIXI.Texture.from(symbol.image);
              const sprite = new PIXI.Sprite(texture);
              sprite.y = j * (reelHeight / numRows);
              sprite.x = reelWidth * 0.03; // Add a small margin
              sprite.width = reelWidth * 0.99;
              sprite.height = (reelHeight / numRows) * 1;
              sprite.symbolName = symbol.name;
              symbolContainer.addChild(sprite);
              rowSymbols.push(sprite);
          }
          
          return rowSymbols;
      }

      // Function to display final symbols for a specific reel
      function displayFinalSymbolsForReel(reelIndex, reelSymbolNames) {
          const { reelWidth, reelHeight } = calculateReelDimensions();
          const symbolContainer = reelSymbols[reelIndex];
          symbolContainer.removeChildren();
          
          // Loop through each row in the reel
          for (let j = 0; j < numRows; j++) {
              const symbolName = reelSymbolNames[j];
              const symbolData = KONG_SYMBOLS[symbolName];
              
              if (symbolData) {
                  const texture = PIXI.Texture.from(symbolData.image);
                  const sprite = new PIXI.Sprite(texture);
                  sprite.y = j * (reelHeight / numRows);
                  sprite.x = reelWidth * 0.01; // Add a small margin
                  sprite.width = reelWidth * 0.96;
                  sprite.height = (reelHeight / numRows) * 1;
                  sprite.symbolName = symbolName;
                  sprite.reelIndex = reelIndex;
                  sprite.rowIndex = j;
                  symbolContainer.addChild(sprite);
              }
          }
      }

      // Add this new function to display the API symbols
      function displayAPISymbols(apiReels) {
          // Loop through each reel
          for (let i = 0; i < numReels; i++) {
              displayFinalSymbolsForReel(i, apiReels[i]);
          }
      }

      // In the spinAnimation function, replace the entire function with this updated version that checks for potential big wins and slows down the last reel

function spinAnimation(callback, apiResult) {
    if (currentInterval) clearInterval(currentInterval);
    
    // Check if this is a big win (greater than 100)
    const isBigWin = apiResult && apiResult.win_amount > 100;
    
    // Normal spin counts for each reel
    let spinCounts = [25, 30, 35, 40, 50]; 
    
    // If it's a big win, make the last reel spin longer for dramatic effect
    if (isBigWin) {
        spinCounts[4] = 55; // Increase the spin count for the last reel
    }
    
    const remainingSpins = [...spinCounts];
    let reelsStoppedCount = 0;
    let isLastReelSlowedDown = false;
    let lastReelInterval = null;
    
    currentInterval = setInterval(() => {
        let allStopped = true;
        
        for (let i = 0; i < numReels; i++)
        {
            if (remainingSpins[i] > 0) {
                allStopped = false;
                
                // Check if this is the last reel and we should slow it down
                if (isBigWin && i === 4 && remainingSpins[i] < 15 && !isLastReelSlowedDown) {
                    isLastReelSlowedDown = true;
                    // Slow down the last reel for dramatic effect
                    clearInterval(currentInterval);
                    lastReelInterval = setInterval(() => {
                        populateReel(i);
                        remainingSpins[i]--;
                        
                        if (remainingSpins[i] <= 0) {
                            clearInterval(lastReelInterval);
                            // Display the final symbols for the last reel
                            if (apiResult && apiResult.reels) {
                                displayFinalSymbolsForReel(i, apiResult.reels[i]);
                            }
                            reelsStoppedCount++;
                            
                            // All reels have stopped
                            setTimeout(() => {
                                if (callback) callback();
                            }, 500); // Slight delay after the last reel stops
                        }
                    }, 150); // Slower interval for the last reel
                    
                    return;
                }
                
                populateReel(i);
                remainingSpins[i]--;
                
                // If this reel just stopped, display the final symbols
                if (remainingSpins[i] <= 0 && apiResult && apiResult.reels) {
                    displayFinalSymbolsForReel(i, apiResult.reels[i]);
                    reelsStoppedCount++;
                    
                    // Play a stop sound for each reel
                    if (soundEffectsEnabled) {
                        const stopSound = new Audio('stop.mp3');
                        stopSound.volume = 0.3;
                        stopSound.play().catch(e => console.log("Audio play failed:", e));
                    }
                }
            }
        }
        
        if (allStopped) {
            clearInterval(currentInterval);
            currentInterval = null;
            
            // All reels have stopped
            setTimeout(() => {
                if (callback) callback();
            }, 500); // Slight delay after all reels stop
        }
    }, isQuickSpinMode ? 50 : 100); // Faster interval for quick spin mode
}

// Function to handle the spin result
function handleSpinResult(result) {
    // Update balance
    balance = result.balance;
    balanceText.textContent = balance.toFixed(2);
    
    // Display win amount
    const winAmount = result.win_amount || 0;
    document.getElementById('update_winnings').textContent = winAmount.toFixed(2);
    
    // Check for free spins trigger
    if (result.free_spins_triggered) {
        freeSpinTriggeredRecently = true;
        triggerFreeSpins(result.free_spins_count, result.bonus_multiplier);
    }
    
    // Check for win
    if (winAmount > 0) {
        // Play win sound
        if (soundEffectsEnabled) {
            winSound.play().catch(e => console.log("Audio play failed:", e));
        }
        
        // Show win message for significant wins
        if (winAmount >= stake * 10) {
            showWinAnimation(winAmount);
        }
    }
    
    // Update free spins if in free spin mode
    if (isFreeSpinMode) {
        remainingFreeSpinCount = result.remaining_free_spins || 0;
        freeSpinsCountElement.textContent = remainingFreeSpinCount;
        
        // Check if free spins ended
        if (remainingFreeSpinCount <= 0) {
            endFreeSpins();
        }
    }
    
    // Continue auto spins if enabled
    if (autoSpins > 0 && !isFreeSpinMode) {
        autoSpins--;
        remainingAutoSpins.textContent = autoSpins > 0 ? autoSpins : '';
        
        if (autoSpins > 0) {
            setTimeout(() => {
                spin();
            }, 1000);
        } else {
            spinning = false;
            autoSpinsStopped = true;
            updateAutoSpinStatus();
        }
    } else {
        spinning = false;
    }
}

// Function to trigger free spins
function triggerFreeSpins(count, multiplier) {
    freeSpinCount = count;
    remainingFreeSpinCount = count;
    bonusMultiplier = multiplier;
    originalBetAmount = stake;
    
    // Show free spins overlay
    freeSpinsOverlay.style.display = 'block';
    
    // Update free spins indicator
    freeSpinsCountElement.textContent = remainingFreeSpinCount;
    bonusMultiplierElement.textContent = bonusMultiplier;
    
    // Hide after a delay
    setTimeout(() => {
        freeSpinsOverlay.style.display = 'none';
        startFreeSpinsOverlay.style.display = 'block';
        
        // Show free spins indicator
        freeSpinsIndicator.style.display = 'block';
        
        // Switch to free spins mode
        isFreeSpinMode = true;
        
        // Update display
        document.getElementById('normalspins_display').style.display = 'none';
        document.getElementById('freespins_display').style.display = 'flex';
        document.getElementById('remaining_fs_holder').textContent = remainingFreeSpinCount;
        document.getElementById('total_fs_holder').textContent = freeSpinCount;
    }, 3000);
}

// Function to end free spins
function endFreeSpins() {
    isFreeSpinMode = false;
    freeSpinCount = 0;
    remainingFreeSpinCount = 0;
    bonusMultiplier = 0;
    
    // Hide free spins indicator
    freeSpinsIndicator.style.display = 'none';
    
    // Switch back to normal display
    document.getElementById('normalspins_display').style.display = 'flex';
    document.getElementById('freespins_display').style.display = 'none';
    
    // Reset stake to original amount
    stake = originalBetAmount;
    currentStakeElement.textContent = stake.toFixed(1);
}

// Function to simulate a spin result
function simulateSpinResult() {
    // Create random reels
    const reels = [];
    for (let i = 0; i < numReels; i++) {
        const reelSymbols = [];
        for (let j = 0; j < numRows; j++) {
            const symbolKeys = Object.keys(KONG_SYMBOLS);
            const randomSymbol = symbolKeys[Math.floor(Math.random() * symbolKeys.length)];
            reelSymbols.push(randomSymbol);
        }
        reels.push(reelSymbols);
    }
    
    // Determine if this is a winning spin
    let winAmount = 0;
    let freeSpinsTriggered = false;
    let freeSpinsCount = 0;
    let bonusMultiplier = 0;
    
    // Check for feature triggers based on demo feature
    if (currentDemoFeature.feature === 'big win') {
        winAmount = stake * 50; // Big win
    } else if (currentDemoFeature.feature === 'free spins' && !isFreeSpinMode) {
        freeSpinsTriggered = true;
        freeSpinsCount = 13;
        bonusMultiplier = 3;
        
        // Ensure scatter symbols appear on all reels
        for (let i = 0; i < numReels; i++) {
            reels[i][Math.floor(Math.random() * numRows)] = 'Scatter';
        }
    } else {
        // Random win (30% chance)
        if (Math.random() < 0.3) {
            winAmount = stake * (Math.random() * 10 + 1);
        }
        
        // Random free spins trigger (5% chance if not in free spin mode)
        if (!isFreeSpinMode && Math.random() < 0.05) {
            freeSpinsTriggered = true;
            freeSpinsCount = 13;
            bonusMultiplier = 3;
            
            // Ensure scatter symbols appear on all reels
            for (let i = 0; i < numReels; i++) {
                reels[i][Math.floor(Math.random() * numRows)] = 'Scatter';
            }
        }
    }
    
    // Apply bonus multiplier if in free spin mode
    if (isFreeSpinMode) {
        winAmount *= bonusMultiplier;
    }
    
    // Update balance
    balance -= stake;
    balance += winAmount;
    
    // Reset demo feature after use
    if (currentDemoFeature.feature !== 'normal spin') {
        currentDemoFeature.feature = 'normal spin';
    }
    
    return {
        reels,
        balance,
        win_amount: winAmount,
        free_spins_triggered: freeSpinsTriggered,
        free_spins_count: freeSpinsCount,
        bonus_multiplier: bonusMultiplier,
        remaining_free_spins: isFreeSpinMode ? remainingFreeSpinCount - 1 : 0
    };
}

// Function to perform a spin
function spin() {
    if (spinning) return;
    
    // Check if in free spin mode or if balance is sufficient
    if (!isFreeSpinMode && balance < stake) {
        alert('Insufficient balance!');
        return;
    }
    
    spinning = true;
    
    // Play spin sound
    if (soundEffectsEnabled) {
        spinSound.play().catch(e => console.log("Audio play failed:", e));
    }
    
    // Hide any win messages
    winMessageElement.style.display = 'none';
    
    // Reset win amount display
    document.getElementById('update_winnings').textContent = '0.00';
    
    // Simulate spin result
    const spinResult = simulateSpinResult();
    
    // Start the spin animation
    spinAnimation(() => {
        handleSpinResult(spinResult);
    }, spinResult);
}

// Initialize the game
function initGame() {
    // Create reels
    createReels();
    
    // Set up event listeners
    spinButton.addEventListener('click', () => {
        if (!spinning) {
            spin();
        }
    });
    
    autoPlayButton.addEventListener('click', () => {
        if (autoSpinsStopped) {
            autoSpinOverlay.style.display = 'flex';
        } else {
            // Stop auto spins
            autoSpins = 0;
            autoSpinsStopped = true;
            updateAutoSpinStatus();
        }
    });
    
    stakeButton.addEventListener('click', () => {
        if (!spinning) {
            stakeOverlay.style.display = 'flex';
        }
    });
    
    // Stake options
    const stakeOptionButtons = stakeOptions.querySelectorAll('.option-button');
    stakeOptionButtons.forEach(button => {
        button.addEventListener('click', () => {
            stakeOptionButtons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedStake = parseFloat(button.getAttribute('data-value'));
        });
    });
    
    // Auto spin options
    const autoSpinOptionButtons = autoSpinOptions.querySelectorAll('.option-button');
    autoSpinOptionButtons.forEach(button => {
        button.addEventListener('click', () => {
            autoSpinOptionButtons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedAutoSpins = parseInt(button.getAttribute('data-value'));
        });
    });
    
    // Loss limit options
    const lossLimitOptionButtons = document.getElementById('lossLimitOptions').querySelectorAll('.option-button');
    lossLimitOptionButtons.forEach(button => {
        button.addEventListener('click', () => {
            lossLimitOptionButtons.forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            const value = button.getAttribute('data-value');
            selectedLossLimit = value === 'Infinity' ? Infinity : parseInt(value);
        });
    });
    
    // Confirm stake button
    confirmStakeButton.addEventListener('click', () => {
        stake = selectedStake;
        currentStakeElement.textContent = stake.toFixed(1);
        stakeOverlay.style.display = 'none';
    });
    
    // Cancel stake button
    cancelStakeButton.addEventListener('click', () => {
        stakeOverlay.style.display = 'none';
    });
    
    // Confirm auto spin button
    confirmAutoSpinButton.addEventListener('click', () => {
        autoSpins = selectedAutoSpins;
        lossLimit = selectedLossLimit;
        autoSpinOverlay.style.display = 'none';
        
        if (autoSpins > 0) {
            initialBalance = balance;
            autoSpinsStopped = false;
            updateAutoSpinStatus();
            remainingAutoSpins.textContent = autoSpins;
            spin();
        }
    });
    
    // Cancel auto spin button
    cancelAutoSpinButton.addEventListener('click', () => {
        autoSpinOverlay.style.display = 'none';
    });
    
    // Info button
    infoButton.addEventListener('click', () => {
        infoOverlay.style.display = 'flex';
        settingsOverlay.style.display = 'none';
    });
    
    // Close info button
    closeInfoButton.addEventListener('click', () => {
        infoOverlay.style.display = 'none';
    });
    
    // Settings button
    function displaySettingsOverlay2() {
        settingsOverlay.style.display = 'flex';
    }
    window.displaySettingsOverlay2 = displaySettingsOverlay2;
    
    // Hide settings overlay
    function hideSettingsOverlay() {
        settingsOverlay.style.display = 'none';
    }
    window.hideSettingsOverlay = hideSettingsOverlay;
    
    // Background music option
    backgroundMusicOption.addEventListener('click', () => {
        backgroundMusicEnabled = !backgroundMusicEnabled;
        
        if (backgroundMusicEnabled) {
            backgroundMusicIcon.innerHTML = '<i class="fa fa-volume-up" style="color: #e4d594;font-size: 1.4rem;"></i>';
            backgroundMusic.play().catch(e => console.log("Audio play failed:", e));
        } else {
            backgroundMusicIcon.innerHTML = '<i class="fa fa-volume-mute" style="color: #e4d594;font-size: 1.4rem;"></i>';
            backgroundMusic.pause();
        }
    });
    
    // Update balance display
    balanceText.textContent = balance.toFixed(2);
    
    // Update stake display
    currentStakeElement.textContent = stake.toFixed(1);
}

// Function to remove bonus frame
function removeBonusFrame() {
    // Implementation depends on your game's specific needs
}

// Initialize the game when the page loads
window.addEventListener('load', initGame);
  </script>
</body>
</html>